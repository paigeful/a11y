YUI.add("user-name-suggestions-model",function(a){var b;b=function(a){this.suggestionUrl=a.suggestionUrl,this.availableUrl=a.availableUrl,this.firstName=a.firstName,this.lastName=a.lastName,this.userName=a.userName,this.domain=a.domain,this.extraQueryParams=a.extraQueryParams,this.suggestions=suggestions={available:!1,list:[]}},a.mix(b.prototype,{createUrl:function(b){var c,d,e,f,g=[];return c=a.Lang.trim(this.firstName.get("value")),d=a.Lang.trim(this.lastName.get("value")),e=a.Lang.trim(this.userName.get("value")),f=this.domain.getAttribute("value"),g.push("GivenName="+c),g.push("FamilyName="+d),g.push("AccountID="+e+"@"+f),g.push(this.extraQueryParams),g.push((new Date).getTime()),c||d||e?b+g.join("&"):!1},beautifySuggestions:function(a){if("SUCCESS"===a.ResultCode)this.suggestions.available=!0;else{this.suggestions.available=!1,this.suggestions.list=[];for(var b=0,c=a.SuggestedIDList.length;c>b;b+=1)this.suggestions.list.push(a.SuggestedIDList[b].replace(/\@yahoo.*/,""))}},suggestionComplete:function(b,c,d){var e=d.context,f=d.callback,g=d.callbackContext;if(200===c.status){try{e.beautifySuggestions(a.JSON.parse(c.responseText))}catch(h){}suggestions&&suggestions.list&&suggestions.list.length>0&&f.call(g,e.suggestions.list)}},getSuggestions:function(b,c,d,e){var f;c.suggestions.list.length<1?(f=c.createUrl(c.suggestionUrl),f&&(c.request&&c.request.abort(),c.request=a.io(f,{on:{complete:c.suggestionComplete},arguments:{context:c,callback:d,callbackContext:e}}))):d.call(e,c.suggestions.list)},availableComplete:function(b,c,d){var e=d.context;if(200===c.status){try{e.beautifySuggestions(a.JSON.parse(c.responseText))}catch(f){}suggestions&&!suggestions.available&&a.fire("user-name:not-available")}},checkAvailability:function(b,c){var d=a.Lang.trim(c.userName.get("value")),e=c.suggestions,f=e?e.list:"";f&&-1!==a.Array.indexOf(f,d)||(url=c.createUrl(c.availableUrl),url&&(c.request&&c.request.abort(),c.request=a.io(url,{on:{complete:c.availableComplete},arguments:{context:c}})))}},!0),a.namespace("UserNameSuggestions"),a.UserNameSuggestions.UserNameSuggestionsModel=b},{requires:["node","io","json-parse"]});